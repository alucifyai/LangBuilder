{
  "app_name": "LangBuilder",
  "version": 2.0,
  "nodes": [
    {
      "id": "ns0001",
      "type": "schema",
      "name": "User",
      "description": "Central user entity managing authentication and authorization",
      "details": "type User {\n  id: ID!\n  username: String! @unique\n  password: String!\n  profileImage: String\n  isActive: Boolean!\n  isSuperuser: Boolean!\n  createdAt: DateTime!\n  updatedAt: DateTime!\n  lastLoginAt: DateTime\n  storeApiKey: String\n  optins: JSON\n  apiKeys: [ApiKey!]!\n  variables: [Variable!]!\n  folders: [Folder!]!\n  flows: [Flow!]!\n  roleAssignments: [RoleAssignment!]!\n  groups: [Group!]!\n}",
      "visual_tag": "modified",
      "visual_color": "#FF9800",
      "visual_description": "MODIFIED: Enhanced for RBAC"
    },
    {
      "id": "ns0002",
      "type": "schema",
      "name": "ApiKey",
      "description": "API authentication tokens for programmatic access",
      "details": "type ApiKey {\n  id: ID!\n  name: String\n  apiKey: String! @unique\n  createdAt: DateTime!\n  lastUsedAt: DateTime\n  totalUses: Int!\n  isActive: Boolean!\n  user: User!\n  permissions: [Permission!]\n}",
      "visual_tag": "modified",
      "visual_color": "#FF9800",
      "visual_description": "MODIFIED: Enhanced for RBAC"
    },
    {
      "id": "ns0003",
      "type": "schema",
      "name": "Variable",
      "description": "Secure storage for environment variables and secrets",
      "details": "type Variable {\n  id: ID!\n  name: String!\n  value: String! @encrypted\n  type: String\n  defaultFields: [String!]\n  createdAt: DateTime!\n  updatedAt: DateTime!\n  user: User!\n}",
      "visual_tag": "original",
      "visual_color": "#2196F3",
      "visual_description": "ORIGINAL: Unchanged from base system"
    },
    {
      "id": "ns0004",
      "type": "schema",
      "name": "Flow",
      "description": "AI workflow configuration with visual node graph",
      "details": "type Flow {\n  id: ID!\n  name: String! @indexed\n  description: String @indexed\n  data: JSON\n  icon: String\n  iconBgColor: String\n  gradient: String\n  isComponent: Boolean\n  updatedAt: DateTime!\n  webhook: Boolean\n  endpointName: String @indexed @unique\n  tags: [String!]\n  locked: Boolean\n  mcpEnabled: Boolean\n  actionName: String\n  actionDescription: String\n  accessType: AccessType!\n  user: User!\n  folder: Folder\n  fsPath: String\n  transactions: [Transaction!]!\n  builds: [VertexBuild!]!\n  roleAssignments: [RoleAssignment!]!\n}",
      "visual_tag": "modified",
      "visual_color": "#FF9800",
      "visual_description": "MODIFIED: Enhanced for RBAC"
    },
    {
      "id": "ns0005",
      "type": "schema",
      "name": "Folder",
      "description": "Hierarchical organization for flows",
      "details": "type Folder {\n  id: ID!\n  name: String! @indexed\n  description: String\n  authSettings: JSON\n  parent: Folder\n  children: [Folder!]!\n  user: User!\n  flows: [Flow!]!\n  roleAssignments: [RoleAssignment!]!\n}",
      "visual_tag": "modified",
      "visual_color": "#FF9800",
      "visual_description": "MODIFIED: Enhanced for RBAC"
    },
    {
      "id": "ns0011",
      "type": "schema",
      "name": "Role",
      "description": "NEW: RBAC - Custom role definition with permission sets",
      "details": "type Role {\n  id: ID!\n  name: String! @unique\n  description: String\n  isSystem: Boolean!\n  permissions: [Permission!]!\n  createdAt: DateTime!\n  updatedAt: DateTime!\n  createdBy: User!\n}",
      "visual_tag": "new",
      "visual_color": "#4CAF50",
      "visual_description": "NEW: RBAC addition"
    },
    {
      "id": "ns0012",
      "type": "schema",
      "name": "Permission",
      "description": "NEW: RBAC - Individual permission definition",
      "details": "type Permission {\n  id: ID!\n  name: String! @unique\n  resource: String!\n  action: String!\n  description: String\n}",
      "visual_tag": "new",
      "visual_color": "#4CAF50",
      "visual_description": "NEW: RBAC addition"
    },
    {
      "id": "ns0013",
      "type": "schema",
      "name": "RoleAssignment",
      "description": "NEW: RBAC - Links users/groups to roles with scope",
      "details": "type RoleAssignment {\n  id: ID!\n  role: Role!\n  assignee: User | Group | ServiceAccount!\n  assigneeType: String!\n  scope: String!\n  scopeId: ID!\n  createdAt: DateTime!\n  createdBy: User!\n}",
      "visual_tag": "new",
      "visual_color": "#4CAF50",
      "visual_description": "NEW: RBAC addition"
    },
    {
      "id": "ns0014",
      "type": "schema",
      "name": "Group",
      "description": "NEW: RBAC - User groups for bulk role assignment",
      "details": "type Group {\n  id: ID!\n  name: String! @unique\n  description: String\n  members: [User!]!\n  roleAssignments: [RoleAssignment!]!\n  createdAt: DateTime!\n  updatedAt: DateTime!\n}",
      "visual_tag": "new",
      "visual_color": "#4CAF50",
      "visual_description": "NEW: RBAC addition"
    },
    {
      "id": "ns0015",
      "type": "schema",
      "name": "ServiceAccount",
      "description": "NEW: RBAC - Programmatic access accounts with scoped permissions",
      "details": "type ServiceAccount {\n  id: ID!\n  name: String! @unique\n  description: String\n  token: String! @encrypted\n  isActive: Boolean!\n  roleAssignments: [RoleAssignment!]!\n  createdAt: DateTime!\n  lastUsedAt: DateTime\n  expiresAt: DateTime\n}",
      "visual_tag": "new",
      "visual_color": "#4CAF50",
      "visual_description": "NEW: RBAC addition"
    },
    {
      "id": "ns0016",
      "type": "schema",
      "name": "AuditLog",
      "description": "NEW: RBAC - Compliance tracking for permission changes",
      "details": "type AuditLog {\n  id: ID!\n  timestamp: DateTime!\n  actor: User | ServiceAccount!\n  actorType: String!\n  action: String!\n  resource: String!\n  resourceId: ID!\n  details: JSON\n  ipAddress: String\n  userAgent: String\n}",
      "visual_tag": "new",
      "visual_color": "#4CAF50",
      "visual_description": "NEW: RBAC addition"
    },
    {
      "id": "ns0006",
      "type": "schema",
      "name": "Transaction",
      "description": "Execution audit trail for flow runs",
      "details": "type Transaction {\n  id: ID!\n  timestamp: DateTime!\n  vertexId: String!\n  targetId: String\n  inputs: JSON\n  outputs: JSON\n  status: String!\n  error: String\n  flow: Flow!\n}",
      "visual_tag": "original",
      "visual_color": "#2196F3",
      "visual_description": "ORIGINAL: Unchanged from base system"
    },
    {
      "id": "ns0007",
      "type": "schema",
      "name": "Message",
      "description": "Chat message with metadata and attachments",
      "details": "type Message {\n  id: ID!\n  timestamp: DateTime!\n  sender: String!\n  senderName: String!\n  sessionId: String!\n  text: String!\n  files: [String!]\n  error: Boolean!\n  edit: Boolean!\n  flowId: ID\n  properties: JSON\n  category: String!\n  contentBlocks: [JSON!]\n}",
      "visual_tag": "original",
      "visual_color": "#2196F3",
      "visual_description": "ORIGINAL: Unchanged from base system"
    },
    {
      "id": "ns0008",
      "type": "schema",
      "name": "File",
      "description": "Uploaded file metadata and storage",
      "details": "type File {\n  id: ID!\n  name: String! @unique\n  path: String!\n  size: Int!\n  provider: String\n  createdAt: DateTime!\n  updatedAt: DateTime!\n  user: User!\n}",
      "visual_tag": "original",
      "visual_color": "#2196F3",
      "visual_description": "ORIGINAL: Unchanged from base system"
    },
    {
      "id": "ns0009",
      "type": "schema",
      "name": "Component",
      "description": "Reusable workflow component definition",
      "details": "type Component {\n  id: ID!\n  name: String!\n  category: String!\n  description: String!\n  icon: String\n  inputs: [ComponentInput!]!\n  outputs: [ComponentOutput!]!\n  parameters: JSON!\n  version: String!\n  isCustom: Boolean!\n  roleAssignments: [RoleAssignment!]!\n}",
      "visual_tag": "original",
      "visual_color": "#2196F3",
      "visual_description": "ORIGINAL: Unchanged from base system"
    },
    {
      "id": "ns0010",
      "type": "schema",
      "name": "VertexBuild",
      "description": "Component build and validation artifacts",
      "details": "type VertexBuild {\n  buildId: ID!\n  id: String!\n  timestamp: DateTime!\n  data: JSON\n  artifacts: JSON\n  params: String\n  valid: Boolean!\n  flow: Flow!\n}",
      "visual_tag": "original",
      "visual_color": "#2196F3",
      "visual_description": "ORIGINAL: Unchanged from base system"
    },
    {
      "id": "ni0001",
      "type": "interface",
      "name": "LoginPage",
      "description": "User authentication interface",
      "details": "{\n  \"type\": \"page\",\n  \"route\": \"/login\",\n  \"components\": [\n    {\"type\": \"form\", \"fields\": [\"username\", \"password\"]},\n    {\"type\": \"button\", \"action\": \"submit\", \"label\": \"Sign In\"},\n    {\"type\": \"link\", \"target\": \"/signup\", \"label\": \"Create Account\"}\n  ]\n}",
      "visual_tag": "original",
      "visual_color": "#2196F3",
      "visual_description": "ORIGINAL: Unchanged from base system"
    },
    {
      "id": "ni0002",
      "type": "interface",
      "name": "UserSettingsPage",
      "description": "User profile and configuration management",
      "details": "{\n  \"type\": \"page\",\n  \"route\": \"/settings/general\",\n  \"components\": [\n    {\"type\": \"form\", \"sections\": [\"profile\", \"preferences\", \"security\"]},\n    {\"type\": \"avatar-upload\"},\n    {\"type\": \"theme-toggle\"}\n  ]\n}",
      "visual_tag": "original",
      "visual_color": "#2196F3",
      "visual_description": "ORIGINAL: Unchanged from base system"
    },
    {
      "id": "ni0003",
      "type": "interface",
      "name": "ApiKeysManagement",
      "description": "API key creation and management interface",
      "details": "{\n  \"type\": \"component\",\n  \"route\": \"/settings/api-keys\",\n  \"components\": [\n    {\"type\": \"table\", \"columns\": [\"name\", \"key\", \"lastUsed\", \"uses\", \"actions\"]},\n    {\"type\": \"button\", \"action\": \"createKey\", \"label\": \"New API Key\"},\n    {\"type\": \"modal\", \"id\": \"keyCreation\"}\n  ]\n}",
      "visual_tag": "original",
      "visual_color": "#2196F3",
      "visual_description": "ORIGINAL: Unchanged from base system"
    },
    {
      "id": "ni0008",
      "type": "interface",
      "name": "RoleManagementPage",
      "description": "NEW: RBAC - Role creation and management interface",
      "details": "{\n  \"type\": \"page\",\n  \"route\": \"/admin/roles\",\n  \"components\": [\n    {\"type\": \"table\", \"columns\": [\"role\", \"description\", \"permissions\", \"users\", \"actions\"]},\n    {\"type\": \"button\", \"action\": \"createRole\", \"label\": \"New Role\"},\n    {\"type\": \"modal\", \"id\": \"roleEditor\", \"fields\": [\"name\", \"permissions\"]},\n    {\"type\": \"permission-matrix\", \"resources\": [\"flow\", \"component\", \"workspace\"]}\n  ]\n}",
      "visual_tag": "original",
      "visual_color": "#2196F3",
      "visual_description": "ORIGINAL: Unchanged from base system"
    },
    {
      "id": "ni0009",
      "type": "interface",
      "name": "PermissionAssignmentModal",
      "description": "NEW: RBAC - Interface for assigning permissions to resources",
      "details": "{\n  \"type\": \"modal\",\n  \"components\": [\n    {\"type\": \"user-selector\", \"multiSelect\": true},\n    {\"type\": \"group-selector\", \"multiSelect\": true},\n    {\"type\": \"role-selector\"},\n    {\"type\": \"scope-selector\", \"options\": [\"flow\", \"component\", \"workspace\"]},\n    {\"type\": \"permission-checklist\"}\n  ]\n}",
      "visual_tag": "original",
      "visual_color": "#2196F3",
      "visual_description": "ORIGINAL: Unchanged from base system"
    },
    {
      "id": "ni0010",
      "type": "interface",
      "name": "AuditLogViewer",
      "description": "NEW: RBAC - Audit log viewing interface for compliance",
      "details": "{\n  \"type\": \"page\",\n  \"route\": \"/admin/audit\",\n  \"components\": [\n    {\"type\": \"date-range-picker\"},\n    {\"type\": \"filter\", \"options\": [\"user\", \"action\", \"resource\"]},\n    {\"type\": \"table\", \"columns\": [\"timestamp\", \"actor\", \"action\", \"resource\", \"details\"]},\n    {\"type\": \"export-button\", \"formats\": [\"csv\", \"json\"]}\n  ]\n}",
      "visual_tag": "original",
      "visual_color": "#2196F3",
      "visual_description": "ORIGINAL: Unchanged from base system"
    },
    {
      "id": "ni0004",
      "type": "interface",
      "name": "FlowEditor",
      "description": "Visual node-based flow builder interface",
      "details": "{\n  \"type\": \"page\",\n  \"route\": \"/flow/:id\",\n  \"components\": [\n    {\"type\": \"react-flow-canvas\", \"features\": [\"zoom\", \"pan\", \"minimap\"]},\n    {\"type\": \"sidebar\", \"sections\": [\"components\", \"search\", \"filters\"]},\n    {\"type\": \"toolbar\", \"actions\": [\"save\", \"run\", \"share\", \"export\"]},\n    {\"type\": \"node-editor-modal\"},\n    {\"type\": \"permission-indicator\"}\n  ]\n}",
      "visual_tag": "original",
      "visual_color": "#2196F3",
      "visual_description": "ORIGINAL: Unchanged from base system"
    },
    {
      "id": "ni0005",
      "type": "interface",
      "name": "FlowDashboard",
      "description": "Flow collection management interface",
      "details": "{\n  \"type\": \"page\",\n  \"route\": \"/flows\",\n  \"components\": [\n    {\"type\": \"grid\", \"view\": \"cards\", \"sortable\": true},\n    {\"type\": \"sidebar\", \"sections\": [\"folders\", \"filters\"]},\n    {\"type\": \"search-bar\"},\n    {\"type\": \"bulk-actions\", \"actions\": [\"delete\", \"duplicate\", \"export\"]},\n    {\"type\": \"permission-filter\"}\n  ]\n}",
      "visual_tag": "original",
      "visual_color": "#2196F3",
      "visual_description": "ORIGINAL: Unchanged from base system"
    },
    {
      "id": "ni0006",
      "type": "interface",
      "name": "PlaygroundInterface",
      "description": "Interactive chat testing environment",
      "details": "{\n  \"type\": \"modal\",\n  \"route\": \"/playground/:id\",\n  \"components\": [\n    {\"type\": \"chat-window\", \"features\": [\"scroll\", \"typing-indicator\"]},\n    {\"type\": \"message-input\", \"features\": [\"file-attach\", \"voice-input\"]},\n    {\"type\": \"session-manager\"},\n    {\"type\": \"file-preview\"}\n  ]\n}",
      "visual_tag": "original",
      "visual_color": "#2196F3",
      "visual_description": "ORIGINAL: Unchanged from base system"
    },
    {
      "id": "ni0007",
      "type": "interface",
      "name": "ComponentLibrary",
      "description": "Component browsing and management interface",
      "details": "{\n  \"type\": \"page\",\n  \"route\": \"/components\",\n  \"components\": [\n    {\"type\": \"category-tabs\", \"categories\": [\"agents\", \"models\", \"tools\", \"data\"]},\n    {\"type\": \"component-grid\", \"features\": [\"search\", \"filter\", \"sort\"]},\n    {\"type\": \"component-detail-modal\"}\n  ]\n}",
      "visual_tag": "original",
      "visual_color": "#2196F3",
      "visual_description": "ORIGINAL: Unchanged from base system"
    },
    {
      "id": "nl0001",
      "type": "logic",
      "name": "AuthenticationService",
      "description": "Handles user login, logout, and session management",
      "details": "statechart AuthenticationService {\n  initial state: unauthenticated\n  states: {\n    unauthenticated: {\n      on login: authenticate\n    }\n    authenticating: {\n      validate credentials -> success: authenticated\n      validate credentials -> failure: unauthenticated\n    }\n    authenticated: {\n      on logout: unauthenticated\n      on refresh: validateToken\n      loadPermissions\n    }\n  }\n  actions: {\n    authenticate: verify username/password, generate JWT\n    validateToken: check JWT expiry, refresh if valid\n    loadPermissions: fetch user roles and permissions\n  }\n}",
      "visual_tag": "original",
      "visual_color": "#2196F3",
      "visual_description": "ORIGINAL: Unchanged from base system"
    },
    {
      "id": "nl0002",
      "type": "logic",
      "name": "ApiKeyManagement",
      "description": "Creates, validates, and manages API keys",
      "details": "functions {\n  createApiKey: generate unique key, encrypt, store with metadata\n  validateApiKey: check key exists, is active, increment usage\n  revokeApiKey: set inactive, maintain audit trail\n  maskApiKey: return first 8 chars + asterisks for display\n  assignApiKeyPermissions: scope API key to specific permissions\n}",
      "visual_tag": "original",
      "visual_color": "#2196F3",
      "visual_description": "ORIGINAL: Unchanged from base system"
    },
    {
      "id": "nl0007",
      "type": "logic",
      "name": "PermissionService",
      "description": "NEW: RBAC - Checks and enforces permissions",
      "details": "statechart PermissionService {\n  functions: {\n    checkPermission(user, resource, action, scope): {\n      1. Get user's direct role assignments\n      2. Get user's group role assignments\n      3. Check inherited permissions from parent scopes\n      4. Apply permission precedence rules\n      5. Return allow/deny with reason\n    }\n    enforcePermission(user, resource, action): {\n      if (!checkPermission()) throw ForbiddenError\n    }\n    getEffectivePermissions(user, scope): {\n      aggregate all permissions for user at scope\n    }\n  }\n  cache: {\n    userPermissionCache: TTL 5 minutes\n    invalidateOnRoleChange: true\n  }\n}",
      "visual_tag": "original",
      "visual_color": "#2196F3",
      "visual_description": "ORIGINAL: Unchanged from base system"
    },
    {
      "id": "nl0008",
      "type": "logic",
      "name": "RoleManagementService",
      "description": "NEW: RBAC - Manages roles and role assignments",
      "details": "functions {\n  createRole(name, permissions): validate and create custom role\n  updateRole(roleId, changes): modify role with audit logging\n  deleteRole(roleId): soft delete with reassignment check\n  assignRole(roleId, assignee, scope): create role assignment\n  revokeRole(assignmentId): remove role assignment\n  getDefaultRoles(): return [Owner, Admin, Editor, Viewer, ServiceAccount]\n  syncWithSSO(): align roles with external identity provider\n}",
      "visual_tag": "original",
      "visual_color": "#2196F3",
      "visual_description": "ORIGINAL: Unchanged from base system"
    },
    {
      "id": "nl0009",
      "type": "logic",
      "name": "AuditService",
      "description": "NEW: RBAC - Logs all access control changes",
      "details": "functions {\n  logRoleChange(actor, action, role, details): record role modifications\n  logPermissionChange(actor, action, permission, scope): record permission changes\n  logAccessAttempt(user, resource, action, result): record access attempts\n  generateComplianceReport(dateRange, filters): export audit logs\n  retentionPolicy: keep logs for 7 years\n  encryption: encrypt sensitive audit data at rest\n}",
      "visual_tag": "original",
      "visual_color": "#2196F3",
      "visual_description": "ORIGINAL: Unchanged from base system"
    },
    {
      "id": "nl0003",
      "type": "logic",
      "name": "FlowExecutionEngine",
      "description": "Processes flow graphs and executes components",
      "details": "statechart FlowExecutionEngine {\n  initial state: idle\n  states: {\n    idle: { on trigger: checkPermissions }\n    checkPermissions: {\n      verify user.can_execute_flow\n      on success: preparing\n      on failure: accessDenied\n    }\n    preparing: {\n      actions: [topological_sort, validate_graph, detect_cycles]\n      on success: executing\n      on failure: error\n    }\n    executing: {\n      parallel states: {\n        processNodes: { execute components in dependency order }\n        streamResults: { send real-time updates via WebSocket }\n      }\n      on complete: completed\n      on error: error\n    }\n    completed: { store results, cleanup resources }\n    error: { log error, notify user, cleanup }\n    accessDenied: { log attempt, notify user }\n  }\n}",
      "visual_tag": "original",
      "visual_color": "#2196F3",
      "visual_description": "ORIGINAL: Unchanged from base system"
    },
    {
      "id": "nl0004",
      "type": "logic",
      "name": "ComponentRegistry",
      "description": "Manages component discovery, loading, and instantiation",
      "details": "functions {\n  loadComponents: scan directories, validate schemas, register\n  instantiateComponent: create instance with parameters\n  validateInputs: check types and constraints\n  executeComponent: run component logic with timeout\n  cacheResults: store outputs for reuse\n  checkComponentPermissions: verify user can use component\n}",
      "visual_tag": "original",
      "visual_color": "#2196F3",
      "visual_description": "ORIGINAL: Unchanged from base system"
    },
    {
      "id": "nl0005",
      "type": "logic",
      "name": "ChatService",
      "description": "Manages chat sessions and message streaming",
      "details": "statechart ChatService {\n  states: {\n    idle: { on message: processing }\n    processing: {\n      actions: [\n        validateMessage,\n        executeFlow,\n        streamResponse\n      ]\n      on complete: idle\n      on error: error\n    }\n    streaming: {\n      send chunks via WebSocket\n      on end: idle\n    }\n  }\n  functions: {\n    createSession: generate sessionId, initialize history\n    processMessage: parse input, attach files, execute\n    streamResponse: send real-time chunks to client\n  }\n}",
      "visual_tag": "original",
      "visual_color": "#2196F3",
      "visual_description": "ORIGINAL: Unchanged from base system"
    },
    {
      "id": "nl0006",
      "type": "logic",
      "name": "ComponentExecutor",
      "description": "Executes individual components with their logic",
      "details": "functions {\n  executeAgent: run autonomous agent with LLM\n  executeModel: call language model API\n  executeTool: integrate with external service\n  executeData: process data transformation\n  executePrompt: render and format prompts\n  validateOutputs: ensure outputs match schema\n}",
      "visual_tag": "original",
      "visual_color": "#2196F3",
      "visual_description": "ORIGINAL: Unchanged from base system"
    },
    {
      "id": "nt0001",
      "type": "test",
      "name": "UserAuthentication",
      "description": "User can successfully log in and access protected resources",
      "details": "Given a registered user with valid credentials\nWhen the user submits the login form\nThen the user should receive a valid JWT token\nAnd the user should be redirected to the dashboard\nAnd protected API endpoints should be accessible",
      "visual_tag": "original",
      "visual_color": "#2196F3",
      "visual_description": "ORIGINAL: Unchanged from base system"
    },
    {
      "id": "nt0005",
      "type": "test",
      "name": "RolePermissionEnforcement",
      "description": "NEW: RBAC - Permissions are correctly enforced based on roles",
      "details": "Given a user with Editor role on a specific flow\nWhen the user attempts to modify the flow\nThen the modification should be allowed\nWhen the user attempts to delete the flow\nThen the action should be denied\nAnd an audit log entry should be created",
      "visual_tag": "original",
      "visual_color": "#2196F3",
      "visual_description": "ORIGINAL: Unchanged from base system"
    },
    {
      "id": "nt0006",
      "type": "test",
      "name": "AuditCompliance",
      "description": "NEW: RBAC - All permission changes are logged for compliance",
      "details": "Given an admin user modifying roles\nWhen a role is created, updated, or deleted\nThen a detailed audit log entry should be created\nAnd the log should include actor, timestamp, and changes\nAnd the log should be immutable and encrypted",
      "visual_tag": "original",
      "visual_color": "#2196F3",
      "visual_description": "ORIGINAL: Unchanged from base system"
    },
    {
      "id": "nt0007",
      "type": "test",
      "name": "ScopeInheritance",
      "description": "NEW: RBAC - Permissions correctly inherit from parent scopes",
      "details": "Given a user with Admin role on a workspace\nWhen accessing a flow within that workspace\nThen the user should have Admin permissions on the flow\nUnless a more restrictive role is explicitly assigned at the flow level",
      "visual_tag": "original",
      "visual_color": "#2196F3",
      "visual_description": "ORIGINAL: Unchanged from base system"
    },
    {
      "id": "nt0002",
      "type": "test",
      "name": "FlowExecution",
      "description": "Flow executes successfully with proper data flow",
      "details": "Given a valid flow with connected components\nAnd user has execute permission on the flow\nWhen the flow is triggered for execution\nThen components should execute in dependency order\nAnd data should flow correctly between components\nAnd the final output should be returned\nAnd execution history should be recorded",
      "visual_tag": "original",
      "visual_color": "#2196F3",
      "visual_description": "ORIGINAL: Unchanged from base system"
    },
    {
      "id": "nt0003",
      "type": "test",
      "name": "ChatInteraction",
      "description": "User can send messages and receive responses",
      "details": "Given a flow with chat input and output components\nWhen a user sends a message in the playground\nThen the message should be processed by the flow\nAnd the response should stream back to the user\nAnd the conversation should be preserved in the session",
      "visual_tag": "original",
      "visual_color": "#2196F3",
      "visual_description": "ORIGINAL: Unchanged from base system"
    },
    {
      "id": "nt0004",
      "type": "test",
      "name": "ComponentExecution",
      "description": "Components execute correctly with valid inputs",
      "details": "Given a component with defined inputs and outputs\nWhen the component receives valid input data\nThen it should process the data according to its logic\nAnd return outputs matching the expected schema\nAnd handle errors gracefully",
      "visual_tag": "original",
      "visual_color": "#2196F3",
      "visual_description": "ORIGINAL: Unchanged from base system"
    }
  ],
  "edges": [
    {
      "id": "e0001",
      "type": "relationship",
      "source": "ns0001",
      "target": "ns0002",
      "label": "owns",
      "details": "one-to-many",
      "visual_tag": "original",
      "visual_color": "#2196F3",
      "visual_description": "ORIGINAL: Base system connection"
    },
    {
      "id": "e0002",
      "type": "relationship",
      "source": "ns0001",
      "target": "ns0003",
      "label": "has",
      "details": "one-to-many",
      "visual_tag": "original",
      "visual_color": "#2196F3",
      "visual_description": "ORIGINAL: Base system connection"
    },
    {
      "id": "e0003",
      "type": "relationship",
      "source": "ns0001",
      "target": "ns0004",
      "label": "creates",
      "details": "one-to-many",
      "visual_tag": "original",
      "visual_color": "#2196F3",
      "visual_description": "ORIGINAL: Base system connection"
    },
    {
      "id": "e0004",
      "type": "relationship",
      "source": "ns0001",
      "target": "ns0005",
      "label": "owns",
      "details": "one-to-many",
      "visual_tag": "original",
      "visual_color": "#2196F3",
      "visual_description": "ORIGINAL: Base system connection"
    },
    {
      "id": "e0005",
      "type": "relationship",
      "source": "ns0001",
      "target": "ns0008",
      "label": "uploads",
      "details": "one-to-many",
      "visual_tag": "original",
      "visual_color": "#2196F3",
      "visual_description": "ORIGINAL: Base system connection"
    },
    {
      "id": "e0025",
      "type": "relationship",
      "source": "ns0001",
      "target": "ns0013",
      "label": "has",
      "details": "one-to-many",
      "visual_tag": "new",
      "visual_color": "#4CAF50",
      "visual_description": "NEW: RBAC connection"
    },
    {
      "id": "e0026",
      "type": "relationship",
      "source": "ns0001",
      "target": "ns0014",
      "label": "belongsTo",
      "details": "many-to-many",
      "visual_tag": "new",
      "visual_color": "#4CAF50",
      "visual_description": "NEW: RBAC connection"
    },
    {
      "id": "e0027",
      "type": "relationship",
      "source": "ns0011",
      "target": "ns0012",
      "label": "contains",
      "details": "many-to-many",
      "visual_tag": "new",
      "visual_color": "#4CAF50",
      "visual_description": "NEW: RBAC connection"
    },
    {
      "id": "e0028",
      "type": "relationship",
      "source": "ns0013",
      "target": "ns0011",
      "label": "assigns",
      "details": "many-to-one",
      "visual_tag": "new",
      "visual_color": "#4CAF50",
      "visual_description": "NEW: RBAC connection"
    },
    {
      "id": "e0029",
      "type": "relationship",
      "source": "ns0014",
      "target": "ns0013",
      "label": "has",
      "details": "one-to-many",
      "visual_tag": "new",
      "visual_color": "#4CAF50",
      "visual_description": "NEW: RBAC connection"
    },
    {
      "id": "e0030",
      "type": "relationship",
      "source": "ns0015",
      "target": "ns0013",
      "label": "has",
      "details": "one-to-many",
      "visual_tag": "new",
      "visual_color": "#4CAF50",
      "visual_description": "NEW: RBAC connection"
    },
    {
      "id": "e0031",
      "type": "relationship",
      "source": "ns0004",
      "target": "ns0013",
      "label": "scoped",
      "details": "one-to-many",
      "visual_tag": "new",
      "visual_color": "#4CAF50",
      "visual_description": "NEW: RBAC connection"
    },
    {
      "id": "e0032",
      "type": "relationship",
      "source": "ns0005",
      "target": "ns0013",
      "label": "scoped",
      "details": "one-to-many",
      "visual_tag": "new",
      "visual_color": "#4CAF50",
      "visual_description": "NEW: RBAC connection"
    },
    {
      "id": "e0033",
      "type": "relationship",
      "source": "ns0009",
      "target": "ns0013",
      "label": "scoped",
      "details": "one-to-many",
      "visual_tag": "new",
      "visual_color": "#4CAF50",
      "visual_description": "NEW: RBAC connection"
    },
    {
      "id": "e0006",
      "type": "relationship",
      "source": "ns0005",
      "target": "ns0004",
      "label": "contains",
      "details": "one-to-many",
      "visual_tag": "original",
      "visual_color": "#2196F3",
      "visual_description": "ORIGINAL: Base system connection"
    },
    {
      "id": "e0007",
      "type": "relationship",
      "source": "ns0004",
      "target": "ns0006",
      "label": "generates",
      "details": "one-to-many",
      "visual_tag": "original",
      "visual_color": "#2196F3",
      "visual_description": "ORIGINAL: Base system connection"
    },
    {
      "id": "e0008",
      "type": "relationship",
      "source": "ns0004",
      "target": "ns0010",
      "label": "creates",
      "details": "one-to-many",
      "visual_tag": "original",
      "visual_color": "#2196F3",
      "visual_description": "ORIGINAL: Base system connection"
    },
    {
      "id": "e0009",
      "type": "relationship",
      "source": "ns0009",
      "target": "ns0010",
      "label": "produces",
      "details": "one-to-many",
      "visual_tag": "original",
      "visual_color": "#2196F3",
      "visual_description": "ORIGINAL: Base system connection"
    },
    {
      "id": "e0010",
      "type": "event",
      "source": "ni0001",
      "target": "nl0001",
      "label": "",
      "details": "login form submission triggers authentication",
      "visual_tag": "original",
      "visual_color": "#2196F3",
      "visual_description": "ORIGINAL: Base system connection"
    },
    {
      "id": "e0041",
      "type": "event",
      "source": "ni0002",
      "target": "nl0001",
      "label": "",
      "details": "settings page triggers user data updates",
      "visual_tag": "original",
      "visual_color": "#2196F3",
      "visual_description": "ORIGINAL: Base system connection"
    },
    {
      "id": "e0011",
      "type": "manages",
      "source": "ni0003",
      "target": "ns0002",
      "label": "",
      "details": "CRUD operations on API keys",
      "visual_tag": "original",
      "visual_color": "#2196F3",
      "visual_description": "ORIGINAL: Base system connection"
    },
    {
      "id": "e0042",
      "type": "event",
      "source": "ni0003",
      "target": "nl0002",
      "label": "",
      "details": "API key management interface triggers key operations",
      "visual_tag": "original",
      "visual_color": "#2196F3",
      "visual_description": "ORIGINAL: Base system connection"
    },
    {
      "id": "e0034",
      "type": "manages",
      "source": "ni0008",
      "target": "ns0011",
      "label": "",
      "details": "CRUD operations on roles",
      "visual_tag": "new",
      "visual_color": "#4CAF50",
      "visual_description": "NEW: RBAC connection"
    },
    {
      "id": "e0043",
      "type": "event",
      "source": "ni0008",
      "target": "nl0008",
      "label": "",
      "details": "role management page triggers role service operations",
      "visual_tag": "new",
      "visual_color": "#4CAF50",
      "visual_description": "NEW: RBAC connection"
    },
    {
      "id": "e0035",
      "type": "event",
      "source": "ni0009",
      "target": "nl0008",
      "label": "",
      "details": "permission assignment triggers role service",
      "visual_tag": "new",
      "visual_color": "#4CAF50",
      "visual_description": "NEW: RBAC connection"
    },
    {
      "id": "e0036",
      "type": "views",
      "source": "ni0010",
      "target": "ns0016",
      "label": "",
      "details": "displays audit logs",
      "visual_tag": "new",
      "visual_color": "#4CAF50",
      "visual_description": "NEW: RBAC connection"
    },
    {
      "id": "e0012",
      "type": "manages",
      "source": "ni0004",
      "target": "ns0004",
      "label": "",
      "details": "create, edit, save flow configurations",
      "visual_tag": "original",
      "visual_color": "#2196F3",
      "visual_description": "ORIGINAL: Base system connection"
    },
    {
      "id": "e0013",
      "type": "event",
      "source": "ni0004",
      "target": "nl0003",
      "label": "",
      "details": "run button triggers flow execution",
      "visual_tag": "original",
      "visual_color": "#2196F3",
      "visual_description": "ORIGINAL: Base system connection"
    },
    {
      "id": "e0037",
      "type": "dependency",
      "source": "nl0003",
      "target": "nl0007",
      "label": "",
      "details": "flow execution checks permissions",
      "visual_tag": "new",
      "visual_color": "#4CAF50",
      "visual_description": "NEW: RBAC connection"
    },
    {
      "id": "e0038",
      "type": "dependency",
      "source": "nl0004",
      "target": "nl0007",
      "label": "",
      "details": "component registry checks permissions",
      "visual_tag": "new",
      "visual_color": "#4CAF50",
      "visual_description": "NEW: RBAC connection"
    },
    {
      "id": "e0039",
      "type": "event",
      "source": "nl0007",
      "target": "nl0009",
      "label": "",
      "details": "permission checks trigger audit logging",
      "visual_tag": "new",
      "visual_color": "#4CAF50",
      "visual_description": "NEW: RBAC connection"
    },
    {
      "id": "e0040",
      "type": "event",
      "source": "nl0008",
      "target": "nl0009",
      "label": "",
      "details": "role changes trigger audit logging",
      "visual_tag": "new",
      "visual_color": "#4CAF50",
      "visual_description": "NEW: RBAC connection"
    },
    {
      "id": "e0014",
      "type": "views",
      "source": "ni0005",
      "target": "ns0004",
      "label": "",
      "details": "browse and manage flow collection",
      "visual_tag": "original",
      "visual_color": "#2196F3",
      "visual_description": "ORIGINAL: Base system connection"
    },
    {
      "id": "e0044",
      "type": "views",
      "source": "ni0005",
      "target": "ns0005",
      "label": "",
      "details": "dashboard displays folders/workspaces",
      "visual_tag": "original",
      "visual_color": "#2196F3",
      "visual_description": "ORIGINAL: Base system connection"
    },
    {
      "id": "e0015",
      "type": "manages",
      "source": "ni0006",
      "target": "ns0007",
      "label": "",
      "details": "create and display messages",
      "visual_tag": "original",
      "visual_color": "#2196F3",
      "visual_description": "ORIGINAL: Base system connection"
    },
    {
      "id": "e0045",
      "type": "manages",
      "source": "ni0006",
      "target": "ns0008",
      "label": "",
      "details": "playground manages file attachments",
      "visual_tag": "new",
      "visual_color": "#4CAF50",
      "visual_description": "NEW: Missing edge correction"
    },
    {
      "id": "e0016",
      "type": "event",
      "source": "ni0006",
      "target": "nl0005",
      "label": "",
      "details": "message submission triggers chat processing",
      "visual_tag": "original",
      "visual_color": "#2196F3",
      "visual_description": "ORIGINAL: Base system connection"
    },
    {
      "id": "e0017",
      "type": "views",
      "source": "ni0007",
      "target": "ns0009",
      "label": "",
      "details": "browse and search components",
      "visual_tag": "original",
      "visual_color": "#2196F3",
      "visual_description": "ORIGINAL: Base system connection"
    },
    {
      "id": "e0018",
      "type": "dependency",
      "source": "nl0003",
      "target": "nl0004",
      "label": "",
      "details": "flow engine requests components from registry",
      "visual_tag": "original",
      "visual_color": "#2196F3",
      "visual_description": "ORIGINAL: Base system connection"
    },
    {
      "id": "e0019",
      "type": "dependency",
      "source": "nl0004",
      "target": "nl0006",
      "label": "",
      "details": "registry invokes component executor",
      "visual_tag": "original",
      "visual_color": "#2196F3",
      "visual_description": "ORIGINAL: Base system connection"
    },
    {
      "id": "e0020",
      "type": "dependency",
      "source": "nl0005",
      "target": "nl0003",
      "label": "",
      "details": "chat service triggers flow execution",
      "visual_tag": "original",
      "visual_color": "#2196F3",
      "visual_description": "ORIGINAL: Base system connection"
    },
    {
      "id": "e0021",
      "type": "event",
      "source": "nl0002",
      "target": "ns0002",
      "label": "",
      "details": "API key operations modify database",
      "visual_tag": "original",
      "visual_color": "#2196F3",
      "visual_description": "ORIGINAL: Base system connection"
    },
    {
      "id": "e0022",
      "type": "event",
      "source": "nl0003",
      "target": "ns0006",
      "label": "",
      "details": "flow execution creates transaction records",
      "visual_tag": "original",
      "visual_color": "#2196F3",
      "visual_description": "ORIGINAL: Base system connection"
    },
    {
      "id": "e0023",
      "type": "navigation",
      "source": "ni0001",
      "target": "ni0005",
      "label": "redirects",
      "details": "successful login redirects to dashboard",
      "visual_tag": "original",
      "visual_color": "#2196F3",
      "visual_description": "ORIGINAL: Base system connection"
    },
    {
      "id": "e0024",
      "type": "composition",
      "source": "ni0004",
      "target": "ni0006",
      "label": "opens",
      "details": "flow editor can open playground modal",
      "visual_tag": "original",
      "visual_color": "#2196F3",
      "visual_description": "ORIGINAL: Base system connection"
    },
    {
      "id": "e0046",
      "type": "event",
      "source": "nl0001",
      "target": "ns0001",
      "label": "",
      "details": "authentication service operates on user data",
      "visual_tag": "new",
      "visual_color": "#4CAF50",
      "visual_description": "NEW: Missing edge correction"
    },
    {
      "id": "e0047",
      "type": "event",
      "source": "nl0007",
      "target": "ns0013",
      "label": "",
      "details": "permission service reads role assignments",
      "visual_tag": "new",
      "visual_color": "#4CAF50",
      "visual_description": "NEW: RBAC connection"
    },
    {
      "id": "e0048",
      "type": "event",
      "source": "nl0008",
      "target": "ns0011",
      "label": "",
      "details": "role management service operates on roles",
      "visual_tag": "new",
      "visual_color": "#4CAF50",
      "visual_description": "NEW: RBAC connection"
    },
    {
      "id": "e0049",
      "type": "event",
      "source": "nl0008",
      "target": "ns0013",
      "label": "",
      "details": "role management service manages role assignments",
      "visual_tag": "new",
      "visual_color": "#4CAF50",
      "visual_description": "NEW: RBAC connection"
    },
    {
      "id": "e0050",
      "type": "event",
      "source": "nl0009",
      "target": "ns0016",
      "label": "",
      "details": "audit service writes to audit log",
      "visual_tag": "new",
      "visual_color": "#4CAF50",
      "visual_description": "NEW: RBAC connection"
    },
    {
      "id": "e0051",
      "type": "event",
      "source": "nl0003",
      "target": "ns0004",
      "label": "",
      "details": "flow execution engine operates on flows",
      "visual_tag": "new",
      "visual_color": "#4CAF50",
      "visual_description": "NEW: Missing edge correction"
    },
    {
      "id": "e0052",
      "type": "event",
      "source": "nl0004",
      "target": "ns0009",
      "label": "",
      "details": "component registry manages components",
      "visual_tag": "new",
      "visual_color": "#4CAF50",
      "visual_description": "NEW: Missing edge correction"
    },
    {
      "id": "e0053",
      "type": "event",
      "source": "nl0005",
      "target": "ns0007",
      "label": "",
      "details": "chat service creates message records",
      "visual_tag": "new",
      "visual_color": "#4CAF50",
      "visual_description": "NEW: Missing edge correction"
    },
    {
      "id": "e0054",
      "type": "dependency",
      "source": "nt0001",
      "target": "ni0001",
      "label": "tests",
      "details": "test validates login interface behavior",
      "visual_tag": "new",
      "visual_color": "#4CAF50",
      "visual_description": "NEW: Missing edge correction"
    },
    {
      "id": "e0055",
      "type": "dependency",
      "source": "nt0001",
      "target": "nl0001",
      "label": "tests",
      "details": "test validates authentication service behavior",
      "visual_tag": "new",
      "visual_color": "#4CAF50",
      "visual_description": "NEW: Missing edge correction"
    },
    {
      "id": "e0056",
      "type": "dependency",
      "source": "nt0001",
      "target": "ns0001",
      "label": "tests",
      "details": "test validates user entity operations",
      "visual_tag": "new",
      "visual_color": "#4CAF50",
      "visual_description": "NEW: Missing edge correction"
    },
    {
      "id": "e0057",
      "type": "dependency",
      "source": "nt0005",
      "target": "nl0007",
      "label": "tests",
      "details": "test validates permission enforcement logic",
      "visual_tag": "new",
      "visual_color": "#4CAF50",
      "visual_description": "NEW: RBAC connection"
    },
    {
      "id": "e0058",
      "type": "dependency",
      "source": "nt0005",
      "target": "ns0011",
      "label": "tests",
      "details": "test validates role-based permissions",
      "visual_tag": "new",
      "visual_color": "#4CAF50",
      "visual_description": "NEW: RBAC connection"
    },
    {
      "id": "e0059",
      "type": "dependency",
      "source": "nt0005",
      "target": "ni0004",
      "label": "tests",
      "details": "test validates flow editor permission indicators",
      "visual_tag": "new",
      "visual_color": "#4CAF50",
      "visual_description": "NEW: RBAC connection"
    },
    {
      "id": "e0060",
      "type": "dependency",
      "source": "nt0006",
      "target": "nl0009",
      "label": "tests",
      "details": "test validates audit service logging",
      "visual_tag": "new",
      "visual_color": "#4CAF50",
      "visual_description": "NEW: RBAC connection"
    },
    {
      "id": "e0061",
      "type": "dependency",
      "source": "nt0006",
      "target": "ns0016",
      "label": "tests",
      "details": "test validates audit log data integrity",
      "visual_tag": "new",
      "visual_color": "#4CAF50",
      "visual_description": "NEW: RBAC connection"
    },
    {
      "id": "e0062",
      "type": "dependency",
      "source": "nt0006",
      "target": "ni0010",
      "label": "tests",
      "details": "test validates audit viewer interface",
      "visual_tag": "new",
      "visual_color": "#4CAF50",
      "visual_description": "NEW: RBAC connection"
    },
    {
      "id": "e0063",
      "type": "dependency",
      "source": "nt0007",
      "target": "nl0007",
      "label": "tests",
      "details": "test validates scope inheritance logic",
      "visual_tag": "new",
      "visual_color": "#4CAF50",
      "visual_description": "NEW: RBAC connection"
    },
    {
      "id": "e0064",
      "type": "dependency",
      "source": "nt0007",
      "target": "ns0013",
      "label": "tests",
      "details": "test validates role assignment scoping",
      "visual_tag": "new",
      "visual_color": "#4CAF50",
      "visual_description": "NEW: RBAC connection"
    },
    {
      "id": "e0065",
      "type": "dependency",
      "source": "nt0002",
      "target": "nl0003",
      "label": "tests",
      "details": "test validates flow execution engine",
      "visual_tag": "new",
      "visual_color": "#4CAF50",
      "visual_description": "NEW: Missing edge correction"
    },
    {
      "id": "e0066",
      "type": "dependency",
      "source": "nt0002",
      "target": "ni0004",
      "label": "tests",
      "details": "test validates flow editor execution triggers",
      "visual_tag": "new",
      "visual_color": "#4CAF50",
      "visual_description": "NEW: Missing edge correction"
    },
    {
      "id": "e0067",
      "type": "dependency",
      "source": "nt0002",
      "target": "ns0004",
      "label": "tests",
      "details": "test validates flow data structure",
      "visual_tag": "new",
      "visual_color": "#4CAF50",
      "visual_description": "NEW: Missing edge correction"
    },
    {
      "id": "e0068",
      "type": "dependency",
      "source": "nt0003",
      "target": "nl0005",
      "label": "tests",
      "details": "test validates chat service behavior",
      "visual_tag": "new",
      "visual_color": "#4CAF50",
      "visual_description": "NEW: Missing edge correction"
    },
    {
      "id": "e0069",
      "type": "dependency",
      "source": "nt0003",
      "target": "ni0006",
      "label": "tests",
      "details": "test validates playground interface",
      "visual_tag": "new",
      "visual_color": "#4CAF50",
      "visual_description": "NEW: Missing edge correction"
    },
    {
      "id": "e0070",
      "type": "dependency",
      "source": "nt0003",
      "target": "ns0007",
      "label": "tests",
      "details": "test validates message persistence",
      "visual_tag": "new",
      "visual_color": "#4CAF50",
      "visual_description": "NEW: Missing edge correction"
    },
    {
      "id": "e0071",
      "type": "dependency",
      "source": "nt0004",
      "target": "nl0006",
      "label": "tests",
      "details": "test validates component executor",
      "visual_tag": "new",
      "visual_color": "#4CAF50",
      "visual_description": "NEW: Missing edge correction"
    },
    {
      "id": "e0072",
      "type": "dependency",
      "source": "nt0004",
      "target": "ni0007",
      "label": "tests",
      "details": "test validates component library interface",
      "visual_tag": "new",
      "visual_color": "#4CAF50",
      "visual_description": "NEW: Missing edge correction"
    },
    {
      "id": "e0073",
      "type": "dependency",
      "source": "nt0004",
      "target": "ns0009",
      "label": "tests",
      "details": "test validates component definitions",
      "visual_tag": "new",
      "visual_color": "#4CAF50",
      "visual_description": "NEW: Missing edge correction"
    }
  ],
  "visualization_legend": {
    "new": {
      "color": "#4CAF50",
      "description": "NEW: RBAC additions and enhancements"
    },
    "modified": {
      "color": "#FF9800",
      "description": "MODIFIED: Existing elements enhanced for RBAC"
    },
    "original": {
      "color": "#2196F3",
      "description": "ORIGINAL: Unchanged from base system"
    }
  }
}